productName="product-"
extends layout-1
block titleName
  title 阿里云-关系型数据库RDS-选型推荐
block css
  link(rel="stylesheet",href="styles/oss.css")
  link(rel="stylesheet",href="http://static-img3.cdn.aliyuncs.com/??css/common/alipw_skin.css,css/www-summerwind/buy.css?v=1367065989")
block header
  include inc/header-index
block content
  .content-header
    ul.title-list-1
      li.li-1
        img(src="http://static-img2.cdn.aliyuncs.com/images/www-summerwind/icon_calculator.gif")
      li.li-2 RDS选型推荐
      li.li-3 什么套餐适合我呢，小云为你来推荐，可任选一种。
  .content-body
    .method-1.box-1
      .box-topbar
      .box-body
        fieldset.form-1
          legend
            span.span-1 方法1
            span.span-2 根据业务评估数据库性能
              ins
          .form-item
            label.form-item-lable.font-16gray 请输入您的信息：
            br
          .form-item
            label.form-item-lable  业务类型：
            select(id="site_type")
              option(value="business") 电子商务网站
              option(value="bbs") 社区网站
              option(value="saas") SAAS化应用
              option(value="company") 企业官网
              option(value="portal") 门户网站
              option(value="other") 其它
          .form-item
            label.form-item-lable  数据库类型：
            select(id="database_type")
              option(value="mysql") Mysql
              option(value="sqlserver") Sql Server
          .form-item
            label.form-item-lable  网站日PV：
            input(id="site_pv").input-1
            span.form-item-tip
              b.font-red 万
              ，可写1-2500的任意值
          .form-item.form-item-buttton
            input.btn.btn-large.btn-orange(type="button",value="开始测算",id="startCount_btn_1")
          div(id="J_program_1") 
    .method-2.box-1
      .box-topbar
      .box-body
        fieldset.form-1
          legend
            span.span-1 方法2
            span.span-2 根据业务评估数据库性能
              ins
          .form-item
            label.form-item-lable.font-16gray 请输入您的信息：
            br
          .form-item
            label.form-item-lable  数据库类型：
            select(id="method2_database_type")
              option(value="mysql") Mysql
              option(value="sqlserver") Sql Server
          .form-item
            label.form-item-lable  QPS(每秒数据库SQL执行次数)：
            input(id="method2_qps").input-1
            span.form-item-tip
              b.font-red 次
              ，可写1-10000的任意值
          .form-item
            label.form-item-lable  物理磁盘个数：
            input(id="method2_disk").input-1
          .form-item
            label.form-item-lable  物理磁盘类型：
            select(id="method2_disk_type")
              option(value="SATA") SATA
              option(value="SAS") SAS
              option(value="SSD") SSD
          .form-item.form-item-buttton
            input.btn.btn-large.btn-orange(type="button",value="开始测算",id="startCount_btn_2") 
          div(id="J_program_2") 
          
      script
        var myTypeList = [{
                "typeName": "新1型",
                "memory": {
                    "mysql": 240,
                    "sqlserver": 1000
                },
                "maxConnections": {
                    "mysql": 60,
                    "sqlserver": 100
                },
                "pv": {
                    "mysql": {
                        "business": [1, 6],
                        "bbs": [1, 18],
                        "saas": [1, 12],
                        "company": [1, 25],
                        "portal": [1, 25],
                        "other": [1, 18]
                    },
                    "sqlserver": {
                        "business": [1, 25],
                        "bbs": [1, 72],
                        "saas": [1, 50],
                        "company": [1, 60],
                        "portal": [1, 60],
                        "other": [1, 72]
                    }
                },
                "qps": {
                    "mysql": [0,100],
                    "sqlserver": [0,400]
                },
                "iops": {
                    "mysql": [0,150],
                    "sqlserver": [0,500]
                }
            }, {
                "typeName": "新2型",
                "memory": {
                    "mysql": 600,
                    "sqlserver": 2000
                },
                "maxConnections": {
                    "mysql": 150,
                    "sqlserver": 200
                },
                "pv": {
                    "mysql": {
                        "business": [6, 15],
                        "bbs": [18, 45],
                        "saas": [12, 30],
                        "company": [25, 60],
                        "portal": [25, 60],
                        "other": [18, 45]
                    },
                    "sqlserver": {
                        "business": [25, 50],
                        "bbs": [72, 120],
                        "saas": [50, 100],
                        "company": [60, 200],
                        "portal": [60, 200],
                        "other": [45, 120]
                    }
                },
                "qps": {
                    "mysql": [100,250],
                    "sqlserver":[400,750]
                },
                "iops": {
                    "mysql": [150,300],
                    "sqlserver":[500,1000]
                }
            }, {
                "typeName": "新3型",
                "memory": {
                    "mysql": 1200,
                    "sqlserver": 4000
                },
                "maxConnections": {
                    "mysql": 300,
                    "sqlserver": 400
                },
                "pv": {
                    "mysql": {
                        "business": [15, 30],
                        "bbs": [45, 90],
                        "saas": [30, 60],
                        "company": [60, 120],
                        "portal": [60, 120],
                        "other": [45, 90]
                    },
                    "sqlserver": {
                        "business": [50, 100],
                        "bbs": [120, 270],
                        "saas": [100, 200],
                        "company": [200, 400],
                        "portal": [200, 400],
                        "other": [120, 270]
                    }
                },
                "qps": {
                    "mysql": [250,500],
                    "sqlserver":[750,1500]
                },
                "iops": {
                    "mysql": [300,600],
                    "sqlserver":[1000,2000]
                }
            }, {
                "typeName": "新4型",
                "memory": {
                    "mysql": 2400,
                    "sqlserver": 6000
                },
                "maxConnections": {
                    "mysql": 600,
                    "sqlserver": 600
                },
                "pv": {
                    "mysql": {
                        "business": [30, 60],
                        "bbs": [90, 180],
                        "saas": [60, 125],
                        "company": [120, 250],
                        "portal": [120, 250],
                        "other": [90, 180]
                    },
                    "sqlserver": {
                        "business": [100, 150],
                        "bbs": [270, 450],
                        "saas": [200, 300],
                        "company": [400, 600],
                        "portal": [400, 600],
                        "other": [270, 450]
                    }
                },
                "qps": {
                    "mysql": [500,1000],
                    "sqlserver": [1500,2500]
                },
                "iops": {
                    "mysql": [600,1200],
                    "sqlserver": [2000,3000]
                }
            }, {
                "typeName": "新5型",
                "memory": {
                    "mysql": 6000,
                    "sqlserver": 8000
                },
                "maxConnections": {
                    "mysql": 1500,
                    "sqlserver": 800
                },
                "pv": {
                    "mysql": {
                        "business": [60, 150],
                        "bbs": [180, 450],
                        "saas": [125, 300],
                        "company": [250, 600],
                        "portal": [250, 600],
                        "other": [180, 450]
                    },
                    "sqlserver": {
                        "business": [150, 200],
                        "bbs": [450, 540],
                        "saas": [300, 400],
                        "company": [600, 800],
                        "portal": [600, 800],
                        "other": [450, 540]
                    }
                },
                "qps": {
                    "mysql": [1000,2500],
                    "sqlserver": [2500,3000]
                },
                "iops": {
                    "mysql": [1200,3000],
                    "sqlserver": [3000,4000]
                }
            }, {
                "typeName": "新6型",
                "memory": {
                    "mysql": 12000,
                    "sqlserver": 12000
                },
                "maxConnections": {
                    "mysql": 2000,
                    "sqlserver": 1200
                },
                "pv": {
                    "mysql": {
                        "business": [150, 300],
                        "bbs": [450, 900],
                        "saas": [300, 600],
                        "company": [600, 1200],
                        "portal": [600, 1200],
                        "other": [450, 900]
                    },
                    "sqlserver": {
                        "business": [200, 300],
                        "bbs": [540, 900],
                        "saas": [400, 600],
                        "company": [800, 1200],
                        "portal": [800, 1200],
                        "other": [540, 900]
                    }
                },
                "qps": {
                    "mysql": [2500,5000],
                    "sqlserver": [3000,5000]
                },
                "iops": {
                    "mysql": [3000,6000],
                    "sqlserver": [4000,6000]
                }
            }, {
                "typeName": "新7型",
                "memory": {
                    "mysql": 24000,
                    "sqlserver": 24000
                },
                "maxConnections": {
                    "mysql": 2000,
                    "sqlserver": 2000
                },
                "pv": {
                    "mysql": {
                        "business": [300, 650],
                        "bbs": [900, 1800],
                        "saas": [600, 1250],
                        "company": [1200, 2500],
                        "portal": [1200, 2500],
                        "other": [900, 1800]
                    },
                    "sqlserver": {
                        "business": [300, 650],
                        "bbs": [900, 1800],
                        "saas": [600, 1250],
                        "company": [1200, 2500],
                        "portal": [1200, 2500],
                        "other": [900, 1800]
                    }
                },
                "qps": {
                    "mysql": [5000,10000],
                    "sqlserver": [5000,10000]
                },
                "iops": {
                    "mysql": [6000,12000],
                    "sqlserver": [6000,12000]
                }
            }
        ];
        var NewLine = '\n';
        var sqlServerTypeList=[];
        Alipw.importClass('Alipw.ComboBox');
        Alipw.Config.set('Alipw.ComboBox',{
          height:25,
          cls:'aliyun-standard-combo',
          overCls:'aliyun-standard-combo-over',
          downCls:'aliyun-standard-combo-down',
          expandedCls:'aliyun-standard-combo-expanded',
          listCls:'aliyun-standard-combo-list',
          listAboveCls:'aliyun-standard-combo-list-above',
          listUnderneathCls:'aliyun-standard-combo-list-underneath'
        });
        Alipw.onReady(function(){
          var combo = new Alipw.ComboBox({
                  applyTo:"#site_type"
               });
          var combo = new Alipw.ComboBox({
                  applyTo:"#database_type"
               });
          var combo = new Alipw.ComboBox({
                  applyTo:"#method2_database_type"
               });
          var combo = new Alipw.ComboBox({
                  applyTo:"#method2_disk_type"
               });
          var viewProgram=function(recommendType,databaseType,container){
              var programHTML = '';
              programHTML+='<h2 class="title-box-1"><b>推荐方案</b><span>（以下建议仅供参考） </span><a href="#">申请免费试用RDS</a></h2>';
              for(var n=0,nn=recommendType.length;n<nn;n++){
                  programHTML+='<div class="box-2 fix-clear program-'+(n+1)+'"><ins class="ins-'+(n+1)+'"></ins>';
                  programHTML+='  <ul class="ul-list-1">';
                  programHTML+='    <li class="li-1">总计费用：</li>';
                  programHTML+='    <li class="li-2">500元/月、5000元/月</li>';
                  programHTML+='  </ul>';
                  programHTML+='  <ul class="ul-list-2">';
                  programHTML+='    <li> <b>数据库类型：</b>'+databaseType+'</li>';
                  programHTML+='    <li> <b>内存：</b>'+recommendType[n].memory[databaseType]+'</li>';
                  programHTML+='    <li> <b>最大并发连接：</b>'+recommendType[n].maxConnections[databaseType]+'</li>';
                  programHTML+='    <li> <b>最大IOPS：</b>'+recommendType[n].iops[databaseType][1]+'</li>';
                  programHTML+='  </ul>';
                  programHTML+='  <div class="buy-button-container"><a class="btn btn-large btn-orange" href="#"> 立即购买</a></div>';
                  programHTML+='</div>';
                }
               
              $(container).fadeOut(300,function(){
                  $(container).html(programHTML).fadeIn();
                });
          }
          $("#startCount_btn_1").click(function(){
              var siteType=$("#site_type").val();
              var databaseType=$("#database_type").val();
              var pvNum=parseInt($("#site_pv").val());
              var recommendType=[];
              for(var i=0,ii=myTypeList.length;i<ii;i++){

                var pvRange=myTypeList[i].pv[databaseType][siteType];
                
                if(pvNum>pvRange[0]&&pvNum<=pvRange[1]){
                    recommendType.push(myTypeList[i]);

                    if(myTypeList[i+1]){
                      recommendType.push(myTypeList[i+1]);
                    }
                }
              }
              viewProgram(recommendType,databaseType,"#J_program_1");
          })
          $("#startCount_btn_2").click(function(){
              var databaseType=$("#method2_database_type").val();
              var qps=parseInt($("#method2_qps").val());
              var diskNum=parseInt($("#method2_disk").val());
              var disktype=$("#method2_disk_type").val()=="SATA"?80:$("#method2_disk_type").val()=="SAS"?150:500;
              var recommendType=-1;
              //计算IOPS
              if($.trim($("#method2_disk").val())!=""){
                var iops=Math.ceil(diskNum*disktype/1.3);
              }
              
              for(var i=0,ii=myTypeList.length;i<ii;i++){

                var qpsRange=myTypeList[i].qps[databaseType];
                var iopsRange=myTypeList[i].iops[databaseType];
                if(qps>qpsRange[0]&&qps<=qpsRange[1]){
                    recommendType=i;

                }
                if(iops&&iops>iopsRange[0]&&iops<=iopsRange[1]){
                    recommendType=i;

                }
              }
              recommendTypeList=[]
              if(recommendType>-1){
                recommendTypeList.push(myTypeList[recommendType]);

                if(myTypeList[recommendType+1]){
                    recommendTypeList.push(myTypeList[recommendType+1]);
                }
              }
              viewProgram(recommendTypeList,databaseType,"#J_program_2");
          })

          })        

